# Migration `20201113151358-setup`

This migration has been generated by Thomas Farla at 11/13/2020, 4:13:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Vocabulary" (
    "id" TEXT NOT NULL,
    "word" TEXT NOT NULL,
    "furigana" TEXT NOT NULL,
    "jlpt" INTEGER NOT NULL,
    "userId" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "Sentence" (
    "id" TEXT NOT NULL,
    "sentence" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "VocabularySentence" (
    "id" TEXT NOT NULL,
    "vocabularyId" TEXT NOT NULL,
    "sentenceId" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY ("vocabularyId") REFERENCES "Vocabulary"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("sentenceId") REFERENCES "Sentence"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "KanjiSentence" (
    "id" TEXT NOT NULL,
    "kanjiCharacter" TEXT NOT NULL,
    "sentenceId" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY ("kanjiCharacter") REFERENCES "Kanji"("character") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("sentenceId") REFERENCES "Sentence"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "Kanji" (
    "character" TEXT NOT NULL,
    "jlpt" INTEGER,
    "frequency" INTEGER,
    "rtkOldIndex" INTEGER,
    "rtkNewIndex" INTEGER,
    "WaniKaniIndex" INTEGER,
    "meaning" TEXT,
    "userId" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("character")
)

CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "handle" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Vocabulary.word_unique" ON "Vocabulary"("word")

CREATE UNIQUE INDEX "User.handle_unique" ON "User"("handle")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201113151358-setup
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,79 @@
+datasource DS {
+  // optionally set multiple providers
+  // example: provider = ["sqlite", "postgresql"]
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = ["native", "rhel-openssl-1.0.x"]
+}
+
+// Define your own datamodels here and run `yarn redwood db save` to create
+// migrations for them.
+
+model Vocabulary {
+  id                 String               @id @default(cuid())
+  word               String               @unique
+  furigana           String
+  jlpt               Int
+  author             User                 @relation(fields: [userId], references: [id])
+  userId             String
+  VocabularySentence VocabularySentence[]
+  createdAt          DateTime             @default(now())
+  updatedAt          DateTime             @default(now())
+}
+
+model Sentence {
+  id                 String               @id @default(cuid())
+  sentence           String
+  KanjiSentence      KanjiSentence[]
+  VocabularySentence VocabularySentence[]
+  createdAt          DateTime             @default(now())
+  updatedAt          DateTime             @default(now())
+}
+
+model VocabularySentence {
+  id           String     @id @default(cuid())
+  vocabulary   Vocabulary @relation(fields: [vocabularyId], references: [id])
+  vocabularyId String
+  sentence     Sentence   @relation(fields: [sentenceId], references: [id])
+  sentenceId   String
+  createdAt    DateTime   @default(now())
+  updatedAt    DateTime   @default(now())
+}
+
+model KanjiSentence {
+  id             String   @id @default(cuid())
+  kanji          Kanji    @relation(fields: [kanjiCharacter], references: [character])
+  sentence       Sentence @relation(fields: [sentenceId], references: [id])
+  kanjiCharacter String
+  sentenceId     String
+  createdAt      DateTime @default(now())
+  updatedAt      DateTime @default(now())
+}
+
+model Kanji {
+  character     String          @id
+  jlpt          Int?
+  frequency     Int?
+  rtkOldIndex   Int?
+  rtkNewIndex   Int?
+  WaniKaniIndex Int?
+  meaning       String?
+  author        User            @relation(fields: [userId], references: [id])
+  userId        String
+  KanjiSentence KanjiSentence[]
+  createdAt     DateTime        @default(now())
+  updatedAt     DateTime        @default(now())
+}
+
+model User {
+  id         String       @id @default(cuid())
+  handle     String       @unique
+  Vocabulary Vocabulary[]
+  Kanji      Kanji[]
+  createdAt  DateTime     @default(now())
+  updatedAt  DateTime     @default(now())
+}
```


